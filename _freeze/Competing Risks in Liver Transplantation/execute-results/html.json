{
  "hash": "2fd7203b25db6164d35927290e8d0c4e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Competing Risks in Liver Transplantation\"\nsubtitle: \"A Bayesian parametric alternative to the Fine-Gray model\"\nauthor: \"Jose Manuel Rivera Espejo\"\ndate: last-modified\ndate-format: \"DD MMMM YYYY\"\nbibliography: references.bib\ntitle-slide-attributes: \n  data-notes: |\n    Welcome again May Taha, Ping Xu, Jiqiu Cheng, Ashley Campbell\ninclude-in-header:\n  - text: |\n      <style>\n      #title-slide .title {\n        font-size: 1.5em;\n      }\n      </style>\n---\n\n\n## The contents {style=\"font-size:60%;\"}\n\n1. Motivating example\n2. Clinical conflict\n3. Handling competing risks\n4. Model definition\n5. Software landscape \n6. Bayesian implementation\n7. Results\n8. Validation and regulatory aligment\n9. CDISC workflow and traceability\n10. Business value for Medpace\n\n\n---\n\n## 1. Motivating example {style=\"font-size:60%;\"}\n\nA liver transplant case study sourced from Collett [@Collett_2023].\n\n::: {.fragment}\nConsistent with the **Estimands framework** [@ICH_E9_R1_2019], a study protocol should define the following attributes:\n:::\n\n::: incremental \n1. **Population:** adult elective transplant recipients from a deceased donor.\n\n::: incremental\n::: {style=\"font-size:80%;\"}\n- Sample size: $N=1761$.\n- Follow up time: $2000-2012$.\n- Baseline attributes: age and primary liver disease.\n:::\n:::\n\n2. **Treatment:** Two types of liver preservation solutions (Solution A vs. Solution B).\n\n3. **Variable/Endpoint:** Time to graft failure due to acute/chronic organ rejection (OR).\n\n4. **Intercurrent events** include graft failure from: \n\n::: incremental\n::: {style=\"font-size:80%;\"}\n- Hepatic artery thrombosis (HAT),\n- Recurrent disease (RD),\n- Other reasons (Other)\n:::\n:::\n\n5. **Summary measure:** The difference in the incidence of graft failure from OR between preservation solutions at time $t$.\n\n:::\n\n::: {.notes}\n**Note:**  data not identical to the original source, only illustrative for the purpose of the presentation.\n\n**primary liver diseases** include\n\n- primary biliary cirrhosis (PBC) \n- primary sclerosing cholangitis (PSC) and\n- alcoholic liver disease (ALD)\n\n**summary measure** is purposely not precise enough to make a point.\n\n**additional considerations:** Given the success of liver transplantation, data presents [heavy censoring]{.underline}, with only $15\\%$ ($n=260$) of individuals experienced graft failure from any cause, and $1.6\\%$ ($n=29$) specifically from OR.\n:::\n\n\n--- \n\n## 2. Clinical conflict {style=\"font-size:60%;\"}\n\nDifferent graft failures (competing risks) can preclude the occurrence of failure from OR (primary endpoint), effectively affecting its existence or interpretation [@ICH_E9_R1_2019; @Collett_2023].\n\n::: incremental \n* **Naive estimator:** \n\n   Can we simply treat competing risks as censored? That is the approach of the naive Kaplan-Meier (KM) estimator\n\n* **Estimation problem:**\n\n    \"Censoring\" competing risks causes the naive KM estimator to overestimate the cumulative incidence of the event of interest [@Collett_2023].\n\n* **Estimand definition:** \n\n    \"The naive KM estimate is the probability of (failing) beyond time $t$, if cause $j$ is the only cause of (failure), that is if all other risks were removed.\" [@Collett_2023; @Hernan_et_al_2025]\n:::\n\n::: {.fragment}\n**Question:** How to ensure an unbiased, efficient estimate of the summary measure?\n:::\n\n\n::: {.notes}\n* **Estimand definition:** \"the analysis is effectively an attempt to simulate a population in which (failure) from other causes is somehow either abolished or rendered independent of the risk factors for (the event of interest). The resulting effect estimate is hard to interpret and may not correspond to a meaningful estimand\" [@Hernan_et_al_2025]\n:::\n\n\n---\n\n## 3. Handling competing risks {style=\"font-size:60%;\"}\n\nConsistent with the **strategies for addressing intercurrent events** [@ICH_E9_R1_2019], alternatives to the **hypothetical strategy** (targeted by naive KM estimator) include:\n\n::: incremental \n* **Create a single composite event**, \n\n    e.g., any cause of graft failure is considered an event. \n\n* **Restricting inference to the principal stratum**, \n\n    e.g., evaluate the effect only in patients who would not experience early HAT (e.g., within the first 48 hours) regardless of the assigned treatment.\n\n* **Apply the treatment policy strategy**. \n\n    e.g., follow patients and record failure from OR regardless of competing risks (the \"re-transplant\" problem).\n\n* **Follow a while-alive strategy**, \n\n    e.g., assess failure from OR while the patient has not yet experienced a competing risk. \n:::\n\n::: {.fragment}\nThe Fine-Gray [@Fine_et_al_1999] and Jeong-Fine [@Jeong_et_al_2006; @Jeong_et_al_2007] estimators target the **while-alive strategy**, modeling the cumulative incidence while subjects remain \"at risk\" for the primary event.\n:::\n\n::: {.notes}\n* **Create a single composite event**, eliminates competing events, but changes the causal question/estimand [@Hernan_et_al_2025]\n\n* **Restricting inference to the principal stratum**, targets a specific subpopulation effect (e.g., LATE), which requires to \"build\" a challenging counterfactual, affecting interpretation and valid estimation [@Hernan_et_al_2025].\n\n* **Apply the treatment policy strategy**. e.g., the \"re-transplant\" problem: if a patient receives a second transplant due to early HAT, and the second liver is rejected due to OR, the strategy could attribute this rejection to the first liver's treatment, because the strategy requires that you follow the patient until you see the event of interest (This is clinically nonsensical).\n\n* **Follow a while-on-treatment strategy**, e.g., in the \"re-transplant\" problem, if a patient receives a second transplant due to early HAT, the strategy would evaluate the risk of graft failure due to OR only while the patient still has their first graft, \"stopping the clock\" at the moment of re-transplant.\n:::\n\n---\n\n## 4. Model definition: The Fine-Gray model {style=\"font-size:60%;\"}\n\n::: {.fragment}\nThe cause-specific subdistribution hazard function is defined as, \n\n$$ \nh_{j}(t) = \\lim_{\\delta t \\rightarrow 0} \\left[ \\frac{P(t \\leq T \\leq t+\\delta t, C=j) | \\{ T \\geq t \\} \\; \\text{or} \\; \\{ T \\leq t \\; and \\; C \\neq j\\}}{ \\delta t } \\right]\n$$ {#eq-FandG_p}\n:::\n\n::: {.fragment}\nTo incorporate the influence of covariates, we assume a proportional subdistribution hazards model,\n\n$$\nh_{ij}(t,\\boldsymbol{\\beta}) = exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} ) \\; h_{0j}(t)\n$$ {#eq-FandG_hij}\n:::\n\n::: {.fragment}\nLeaving the baseline hazard $h_{0j}(t)$ **unspecified**, the parameters are estimated by maximizing the partial likelihood function for $m$ causes:\n\n$$\nL(\\boldsymbol{\\beta}) = \\prod_{j=1}^{m} \\prod_{i=1}^{n} \\frac{ exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} ) }{ \\sum_{l \\in R(t_{(h)})} w_{hl} \\; exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{l}} ) } \n$$ {#eq-FandG_L}\n:::\n\n::: {.fragment}\nThe model is best interpreted in terms of the effects of explanatory variables on the cause-specific cumulative incidence function,\n\n$$\nF_{ij}(t,\\boldsymbol{\\beta}) = 1 - exp \\left[ -exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} ) H_{0j}(t) \\right]\n$$ {#eq-FandG_Hij}\n\nwhere the baseline cumulative subdistribution hazard function, $H_{0j}(t)$, is estimated using the Nelson-Aalen estimate [@Collett_2023].\n:::\n\n::: {.notes}\n$h_{j}(t)$ is \"the instantaneous event rate at time $t$ from cause $j$, given that an individual has not previously died from cause $j$\" [@Collett_2023]\n\nThe F&G model is the [industry standard]{.underline}, but it utilizes a **risk set that is not straightforward to interpret**: it continues to include subjects who have experienced a competing event as if they were still at risk for other competing events.\n:::\n\n\n---\n\n## 4. Model definition: The Jeong-Fine model {style=\"font-size:60%;\"}\n\n::: {.fragment}\nThe cause-specific subdistribution hazard function is defined as, \n\n$$ \nh_{j}(t) = \\lim_{\\delta t \\rightarrow 0} \\left[ \\frac{P(t \\leq T \\leq t+\\delta t, C=j) | T \\geq t }{ \\delta t } \\right]\n$$ {#eq-JandF_p}\n:::\n\n::: {.fragment}\nTo incorporate the influence of covariates, we also assume a proportional subdistribution hazards model. Unlike Fine-Gray, we assume a **parametric form** for baseline hazard (e.g., Weibull):\n\n$$\n\\begin{aligned}\nh_{ij}(t, \\boldsymbol{\\beta}, \\boldsymbol{\\theta}) &= exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} ) \\; h_{0j}(t, \\boldsymbol{\\theta}) \\\\\n&= exp( \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} ) \\; \\lambda \\gamma t^{\\gamma-1}\n\\end{aligned}\n$$ {#eq-JandF_hij}\n:::\n\n::: {.fragment}\nThe parameters are estimated by maximizing the full likelihood function for $m$ causes,\n\n$$\nL(\\boldsymbol{\\beta},\\boldsymbol{\\theta}) = \\prod_{j=1}^{m} \\prod_{i=1}^{n} h_{ij}(t,\\boldsymbol{\\beta}, \\boldsymbol{\\theta})^{\\delta_{ij}} \\; exp[ -H_{ij}(t,\\boldsymbol{\\beta}, \\boldsymbol{\\theta}) ]\n$$ {#eq-JandF_L}\n\n:::\n\n::: {.fragment}\nSimilarly, the model is best interpreted in terms of the effects of covariates on the cause-specific cumulative incidence function,\n\n$$\nF_{ij}(t,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) = \\int_{0}^{t} f_{ij}(u,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) \\; du = \\int_{0}^{t} h_{ij}(u,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) \\; S(u,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) \\; du\n$$ {#eq-FandG_Hij}\n:::\n\n::: {.notes}\n$h_{j}(t)$ is \"the instantaneous event rate at time $t$ from cause $j$, given that an individual has not experienced any event at time $t$\" [@Collett_2023; @Jeong_et_al_2006]\n\n**Benefit:** interpretable risk set.\n\n**Drawback:** $F_{ij}(t)$ usually requires numerical integration\n:::\n\n---\n\n## 5. Software landscape {style=\"font-size:60%;\"}\n\nThe following tools are available for model estimation:\n\n::: incremental\n- **Fine-Gray:** Well-supported frequentist implementation via the `cmprsk` package [@Gray_2024] and `survival` package [@Therneau_et_al_2000; @Therneau_2026] with the `finegray` function.\n- **Jeong-Fine:** Lacks a long-standing, stable frequentist implementation; however, the `cmpp` package [@Ezzatabadipour_2025] (currently in development phase) provides an option.\n:::\n\n::: {.fragment}\nNevertheless, by leveraging `Stan` [@Stan_2026a; @Stan_2026b] via the `cmdstanr` package [@Gabry_et_al_2025b], we can implement both models within a **Bayesian** framework.\n:::\n\n::: {.fragment}\nBenefits:\n\n::: incremental\n::: {style=\"font-size:80%;\"}\n- Custom likelihoods\n- Uncertainty propagation\n- It does not rely on asymptotic theory\n- Possibility of getting the full posterior distribution for $F_{ij}(t)$\n::: \n:::\n:::\n\n::: {.fragment}\nDrawbacks:\n\n::: incremental\n::: {style=\"font-size:80%;\"}\n- Probabilistic Programming Language (PPL) knowledge\n- Justification for priors (see Topic $7$)\n::: \n:::\n:::\n\n::: {.notes}\nRobust and flexible alternative to the missing frequentist implementation\n\nBenefits:\n\n- Allows the definition of [custom likelihoods]{.underline} not natively available in standard packages.\n- Provides a posterior distribution that propagates all parameter [uncertainty]{.underline}.\n- [Does not rely on asymptotic theory]{.underline}, making it more robust in small-sample scenarios.\n- The [Bayesian J&F model]{.underline} yields the full posterior distribution for the cumulative incidence function, $F_{ij}(t)$.\n\nDrawbacks:\n\n- Frequentist analysis requires optimization knowledge.  \n:::\n\n\n---\n\n## 6. Bayesian implementation: The Fine-Gray model {style=\"font-size:60%;\"}\n\nThe partial log-likelihood for @eq-FandG_L is,\n\n$$\n\\log L(\\boldsymbol{\\beta}) = \\sum_{j=1}^{m} \\sum_{i=1}^{n} \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{i}} - \\log \\left\\{ \\sum_{l \\in R(t_{(h)})} exp \\left[ \\log(w_{hl}) + \\boldsymbol{\\beta_{j}'} \\boldsymbol{x_{l}} \\right] \\right\\} \n$$ {#eq-FandG_logL}\n\nSorting data in descending order by event times, the Bayesian model is as follows:\n\n```{{r}}\nStanModel = \"\ndata {\n  int<lower=0> m; // number of causes\n  int<lower=0> n; // num obs\n  int<lower=0> q; // num covariates\n  vector[n] t;    // time\n  matrix[n,m] s;  // cause of failure\n  matrix[n,q] X;  // covariates\n  vector[n] w;    // weights\n}\nparameters {\n  matrix[q,m] beta; // beta[covariate,cause]\n}\nmodel {\n  // priors\n  to_vector(beta) ~ normal(0,2);\n  \n  // risk score\n  matrix[n,m] rs = X*beta;\n  \n  // partial log-likelihood\n  for( j in 1:m ){\n    for( i in 1:n ) {\n      if( s[i,j]==1 ){\n        real log_den = log_sum_exp( log(w[1:i]) + rs[1:i, j] );\n        target += rs[i,j] - log_den;\n      }\n    }\n  }\n}\n```\n\n---\n\n## 6. Bayesian implementation: The Jeong-Fine model {style=\"font-size:60%;\"}\n\nThe full log-likelihood for @eq-JandF_L is,\n\n$$\n\\log L(\\boldsymbol{\\beta},\\boldsymbol{\\theta}) = \\sum_{j=1}^{m} \\sum_{i=1}^{n} \\delta_{ij} \\cdot \\log h_{ij}(t,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) - H_{ij}(t,\\boldsymbol{\\beta},\\boldsymbol{\\theta}) \n$$ {#eq-JandF_logL}\n\nand the Bayesian model is defined as:\n\n```{{r}}\nStanModel = \"\nfunctions{\n  // cause-specific log hazard function\n  real log_hij( real t, real rs, real lambda, real gamma ){\n    return( rs + log(lambda) + log(gamma) + (gamma-1)*log(t) );\n  }\n  // cause-specific cummulative hazard function\n  real Hij( real t, real rs, real lambda, real gamma ){\n    return( exp( rs ) * lambda * t^gamma ); \n  }\n  // overall log-survival function\n  real log_S( real t, vector rs, vector lambda, vector gamma, int m ) {\n    real oSt = 0;\n    for (j in 1:m) {\n      oSt += Hij(t, rs[j], lambda[j], gamma[j]);\n    }\n    return(-oSt);\n  }\n  // cause specific log-density\n  real log_fij( real t, int j, vector rs, vector lambda, vector gamma, int m ){\n    return ( log_hij( t, rs[j], lambda[j], gamma[j] ) + \n             log_S( t, rs, lambda, gamma, m ) );\n  }\n  // Integrand for the density function\n  real fij(real t, real xc, array[] real theta, array[] real x_r, array[] int x_i) {\n    // parameters and data\n    int j = x_i[1];\n    int m = x_i[2];\n    vector[m] rs = to_vector( theta[1:m] );\n    vector[m] lambda = to_vector( theta[(m+1):(2*m)] );\n    vector[m] gamma =  to_vector( theta[(2*m+1):(3*m)] );\n    return( exp( log_fij( t, j, rs, lambda, gamma, m ) ) );\n  }\n}\ndata {\n  // fitting data\n  int<lower=0> m;       // number of causes\n  int<lower=0> n;       // num obs\n  int<lower=0> q;       // num covariates\n  vector[n] t;          // time\n  matrix[n,m] s;        // cause of failure\n  matrix[n,q] X;        // covariates\n  \n  // For Marginal Approximation\n  int<lower=1> ms;      // Number of Monte Carlo draws (e.g., 100)\n  int<lower=0> ns;      // number of time samples\n  vector[ns] ts;         // time samples\n  matrix[1,q] XS;       // covariates for simulation\n}\nparameters {\n  matrix[q,m] beta;           // beta[covariate,cause]\n  vector<lower=0>[m] lambda;  // lambda[cause]\n  vector<lower=0>[m] gamma;   // gamma[cause]\n}\nmodel {\n  // priors\n  to_vector(beta) ~ normal(0,2);\n  lambda ~ exponential(2);\n  gamma ~ gamma(8,5); \n  \n  // risk score\n  matrix[n,m] rs = X*beta;\n  \n  // log-likelihood\n  for( j in 1:m ){\n    for( i in 1:n ){\n      target += s[i,j] * log_hij( t[i], rs[i,j], lambda[j], gamma[j] ) -\n                Hij( t[i], rs[i,j], lambda[j], gamma[j] );\n    }\n  }\n}\ngenerated quantities {\n  matrix[ns,m] Fij_MC;\n  matrix[ns,m] Fij_I;\n  \n  // risk score\n  vector[m] rs = to_vector(XS*beta);\n  \n  // flatten parameters \n  array[3*m] real flat_theta;\n  for (j in 1:m) {\n    flat_theta[j] = rs[j];\n    flat_theta[m+j] = lambda[j];\n    flat_theta[2*m+j] = gamma[j];\n  }\n  \n  for (i in 1:ns) {\n    for (j in 1:m) {\n    \n      // Monte Carlo integration\n      real fij_sum = 0;\n      for (k in 1:ms) {\n        real u = uniform_rng(0, ts[i]);\n        fij_sum += exp(log_fij(u, j, rs, lambda, gamma, m));\n      }\n      Fij_MC[i,j] = ts[i] * (fij_sum / ms); \n      // Fij = t[i] * p(t[i])\n      \n      // Double Exponential Quadrature integration\n      Fij_I[i,j] = integrate_1d( fij, 0.0, ts[i], flat_theta, {0.0}, {j,m} );\n      \n    }\n  }\n}\n\"\n```\n\n---\n\n## 7. Results: Data description {style=\"font-size:60%;\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Set environment\"}\n# working environment ####\n\n# cleaning R start\nrm(list=ls()); gc()\n\n# loading libraries\nlibraries = c( \n  # general purpose\n  'here','tidyverse','rtables','gt','cowplot',\n  \n  # frequentist implementations\n  'survival','cmprsk','tidycmprsk','ggsurvfit',\n  \n  # Bayesian implementations\n  'cmdstanr', 'coda','posterior','bayesplot'\n) \nsapply(libraries, require, character.only=T)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Dataset load\"}\n# Source data ####\n\n# load data\nrd  = file.path( here(), 'data', 'liver transplant example.dat')\nds = rd %>%\n  read.table( header=T )\n\n              \n# data structure\n# str(ds)\n# \n# Note:\n#   patient: patient number\n#   age: age at baseline\n#   treatment: 1=Solution A, 2=Solution B\n#   disease: primary liver disease, 1=PBC, 2=PSC, 3=ALD\n#   time: time to cause of graft failure\n#   status: 1=event, 0=censored\n#   cof: cause of graft failure, 0=functioning graft, 1=rejection, 2=thrombosis, 3=recurrent disease, 4=other\n\n\n# convert to factor\nds = ds %>%\n  mutate(\n    treatment_label = treatment,\n    disease_label = disease,\n    cof_label = cof ) %>%\n  mutate_at( \n    .vars = vars(treatment_label), \n    .funs = factor,\n    levels = 1:2, \n    labels = c('Solution A','Solution B')\n  ) %>%\n  mutate(\n    treatment_label = \n      fct_relevel( treatment_label, \n                   c('Solution B','Solution A'))) %>%\n  mutate_at( \n    .vars = vars(disease_label), \n    .funs = factor,\n    levels = 1:3, \n    labels = c('PBC','PSC','ALD') ) %>%\n  mutate(\n    disease_label = \n      fct_relevel( disease_label, \n                   c('ALD','PBC','PSC'))) %>%\n  mutate_at( \n    .vars = vars(cof_label), \n    .funs = factor,\n    levels = 0:4, \n    labels = c('Functioning graft', \n               'Organ Rejection', \n               'Hepatic Artery Thrombosis', \n               'Recurrent Disease', \n               'Other') )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Demographics table (DMT01)\"}\n## Demographics (DMT01) #####\n\n# calculation and formatting function\nf_summary = function(x) {\n  if ( is.numeric(x) ) {\n    in_rows(\n      \"n\" = rcell( sum(!is.na(x)), format = \"xx\"),\n      \"Mean (SD)\" = rcell( c(mean(x, na.rm=T), sd(x, na.rm=T)), format = \"xx.x (xx.x)\"),\n      \"Median\" = rcell( median(x, na.rm=T), format = \"xx.x\"),\n      \"Min - Max\" = rcell( range(x, na.rm=T), format = \"xx.x - xx.x\")\n    )\n  } else if ( is.factor(x) ) {\n    tab = c( table(x) )\n    do.call( \n      in_rows, \n      c( \"n\" = rcell( sum(tab), format = \"xx\" ),\n         lapply(tab, rcell, format = \"xx\" ) ) )\n  } else {\n    stop(\"type not supported\")\n  }\n}\n\n# table\nbasic_table( show_colcounts=T ) %>%\n  split_cols_by( \n    var = \"treatment_label\",\n    ref_group = \"Solution B\") %>%\n  add_overall_col(\"All Patients\") %>%\n  analyze( \n    vars = c('age','disease_label'), \n    afun = f_summary,\n    var_labels = c('Age (yr)','Liver Disease') \n  ) %>%\n  build_table( df=ds )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                Solution B    Solution A    All Patients\n                  (N=694)      (N=1067)       (N=1761)  \n————————————————————————————————————————————————————————\nAge (yr)                                                \n  n                 694          1067           1761    \n  Mean (SD)     53.6 (9.4)    53.3 (9.3)     53.5 (9.3) \n  Median           55.0          54.0           55.0    \n  Min - Max     18.0 - 74.0   18.0 - 74.0   18.0 - 74.0 \nLiver Disease                                           \n  n                 694          1067           1761    \n  ALD               200           733           933     \n  PBC               400           69            469     \n  PSC               94            265           359     \n```\n\n\n:::\n:::\n\n\n---\n\n## 7. Results: Data description {style=\"font-size:60%;\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Deaths table (DTHT01)\"}\n## Deaths (DTHT01) #####\n\n# calculation and formatting functions\nevent_count = function(x, .N_col) {\n  tab = c( table(x) )\n  in_rows(\n    \"Total number of events\" = rcell( tab[2] * c(1, 1 / .N_col), format = \"xx (xx.x%)\" )\n  )\n}\n\ncof_count = function(x, .N_col) {\n  tab = c( table(x) )\n  tab = tab[ names(tab) != \"Functioning graft\" ]\n  do.call( \n    in_rows, \n    c( \"n\" = rcell( sum(tab), format = \"xx\" ),\n       lapply( \n         tab,\n         function(xi){ rcell(xi * c(1, 1 / .N_col), format = \"xx (xx.x%)\") } \n       ) ) )\n}\n\n\n# table\nbasic_table( show_colcounts=T ) %>%\n  split_cols_by( \n    var = \"treatment_label\", \n    ref_group = \"Solution B\") %>%\n  add_overall_col(\"All Patients\") %>%\n  analyze( \n    vars = \"status\", \n    afun = event_count, \n    show_labels = \"hidden\" ) %>%\n  analyze( \n    vars = \"cof_label\", \n    afun = cof_count, \n    var_labels = \"Cause of graft failure\", \n    show_labels = \"visible\" ) %>%\n  build_table( df=ds )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                              Solution B    Solution A    All Patients\n                                (N=694)      (N=1067)       (N=1761)  \n——————————————————————————————————————————————————————————————————————\nTotal number of events        106 (15.3%)   159 (14.9%)   265 (15.0%) \nCause of graft failure                                                \n  n                               104           156           260     \n  Organ Rejection              14 (2.0%)     15 (1.4%)     29 (1.6%)  \n  Hepatic Artery Thrombosis    32 (4.6%)     41 (3.8%)     73 (4.1%)  \n  Recurrent Disease            14 (2.0%)     28 (2.6%)     42 (2.4%)  \n  Other                        44 (6.3%)     72 (6.7%)     116 (6.6%) \n```\n\n\n:::\n:::\n\n\n::: {.notes}\nfrom [TLG Catalog](https://insightsengineering.github.io/tlg-catalog/stable/):\n- Table Demography `DMT01` \n- Table Deaths `DTHT01` \n:::\n\n---\n\n## 7. Results: Frequentist Fine-Gray model {style=\"font-size:60%;\"}\n\nAbout the fitting process:\n\n::: incremental\n- It used the `cmprsk` package [@Gray_2024].\n- It runs all causes in a second.\n:::\n\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Fine-Gray regression (Equivalence: COXT01)\"}\n### Fine-Gray regression ####\n# (Equivalence: COXT01) \n\n# load ADR?\nhr_cof = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_F_FG.RDS') ) )\n\n# Hazard tables\nhr_cof[,c(5,1:4,7)] %>%\n  filter( cof_label == 'Organ Rejection' ) %>%\n  group_by( cof_label ) %>%\n  gt() %>%\n  cols_align(\n    align = \"right\",\n    columns = everything()\n  ) %>%\n  tab_spanner(\n    label = \"90% CI\",\n    columns = c('lower','upper')\n  ) %>%\n  tab_spanner(\n    label = \"Treatment effect adjusted for covariate\",\n    columns = c('Hazard ratio','lower','upper','p-value')\n  ) %>%\n  fmt_number( \n    columns = 2:4,\n    decimal = 2\n  ) %>%\n  fmt_number( \n    columns = 5,\n    decimal = 4\n  ) %>%\n  sub_missing( missing_text = \" \" )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"aehsxfyyjt\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#aehsxfyyjt table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#aehsxfyyjt thead, #aehsxfyyjt tbody, #aehsxfyyjt tfoot, #aehsxfyyjt tr, #aehsxfyyjt td, #aehsxfyyjt th {\n  border-style: none;\n}\n\n#aehsxfyyjt p {\n  margin: 0;\n  padding: 0;\n}\n\n#aehsxfyyjt .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#aehsxfyyjt .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#aehsxfyyjt .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#aehsxfyyjt .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#aehsxfyyjt .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#aehsxfyyjt .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#aehsxfyyjt .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#aehsxfyyjt .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#aehsxfyyjt .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#aehsxfyyjt .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#aehsxfyyjt .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#aehsxfyyjt .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#aehsxfyyjt .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#aehsxfyyjt .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#aehsxfyyjt .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#aehsxfyyjt .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#aehsxfyyjt .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#aehsxfyyjt .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#aehsxfyyjt .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#aehsxfyyjt .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#aehsxfyyjt .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#aehsxfyyjt .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#aehsxfyyjt .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#aehsxfyyjt .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#aehsxfyyjt .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#aehsxfyyjt .gt_left {\n  text-align: left;\n}\n\n#aehsxfyyjt .gt_center {\n  text-align: center;\n}\n\n#aehsxfyyjt .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#aehsxfyyjt .gt_font_normal {\n  font-weight: normal;\n}\n\n#aehsxfyyjt .gt_font_bold {\n  font-weight: bold;\n}\n\n#aehsxfyyjt .gt_font_italic {\n  font-style: italic;\n}\n\n#aehsxfyyjt .gt_super {\n  font-size: 65%;\n}\n\n#aehsxfyyjt .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#aehsxfyyjt .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#aehsxfyyjt .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#aehsxfyyjt .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#aehsxfyyjt .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#aehsxfyyjt .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#aehsxfyyjt .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#aehsxfyyjt .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#aehsxfyyjt div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\"></th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Treatment effect adjusted for covariate\">\n        <div class=\"gt_column_spanner\">Treatment effect adjusted for covariate</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Effect/Covariate-Included-in-the-model\">Effect/Covariate Included in the model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Hazard-ratio\">Hazard ratio</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"90% CI\">\n        <div class=\"gt_column_spanner\">90% CI</div>\n      </th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"p-value\">p-value</th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"lower\">lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"upper\">upper</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"5\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Organ Rejection\">Organ Rejection</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Solution A vs control (Solution B)</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.60</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.31</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.15</td>\n<td headers=\"Organ Rejection  p-value\" class=\"gt_row gt_right\">0.7877</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Age</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.97</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.93</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"Organ Rejection  p-value\" class=\"gt_row gt_right\"><br /></td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PBC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.69</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.29</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.62</td>\n<td headers=\"Organ Rejection  p-value\" class=\"gt_row gt_right\"><br /></td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PSC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">1.10</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.51</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">2.38</td>\n<td headers=\"Organ Rejection  p-value\" class=\"gt_row gt_right\"><br /></td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n:::\n\n\n::: {.notes}\nfrom [TLG Catalog](https://insightsengineering.github.io/tlg-catalog/stable/):\n- Table Efficacy `COXT01` \n- Graphs Efficacy `KMG01`\n\n**Note:** patients that receive solution A have lower risk of graft failure from OR, than patients on Solution B \n:::\n\n---\n\n## 7. Results: Frequentist Fine-Gray model {style=\"font-size:60%;\"}\n\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Fine-Gray failures plot (Equivalence: KMG01)\"}\n### Fine-Gray failures plot ####\n# (Equivalence: KMG01)\n\n# require(ggsurvfit)\n\ncof = c('Organ Rejection', \n        'Hepatic Artery Thrombosis', \n        'Recurrent Disease', \n        'Other')\n\nfor( j in 1:max(ds$cof) ){\n  assign( \n    paste0('F', j),\n    cuminc( \n      Surv(time, cof_label) ~ treatment_label, \n      data = ds ) %>%\n      ggcuminc( outcome = cof[j] ) +\n      add_confidence_interval() +\n      add_risktable() +\n      scale_ggsurvfit( \n        x_scales = list(breaks=seq(0,max(ds$time), by=500)),\n        y_scales = list(limits=c(0,0.07)) )\n  )\n}\n\nF1\n```\n\n::: {.cell-output-display}\n![](Competing-Risks-in-Liver-Transplantation_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n:::\n\n\n:::\n\n---\n\n## 7. Results: Bayesian Fine-Gray model {style=\"font-size:60%;\"}\n\nAbout the fitting process:\n\n::: incremental\n- It used `Stan` [@Stan_2026a; @Stan_2026b] via the `cmdstanr` package [@Gabry_et_al_2025b].\n- It runs all causes in $250-300$ seconds ($4.2-5$ minutes),\n- It produces healthy sampling chains\n:::\n\n::: {.fragment}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Bayesian Fine-Gray regression (Equivalence: COXT01)\"}\n### Bayesian Fine-Gray regression ####\n# (Equivalence: COXT01) \n\n# load ADR?\nhr_cof = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_FG.RDS') ) )\n\n\nhr_cof %>%\n  select( \n    'Effect/Covariate Included in the model', \n    'Hazard ratio', \n    lower, \n    upper, \n    'P(0.95< HR <1.1)', \n    cof_label ) %>%\n  filter( cof_label == 'Organ Rejection' ) %>%\n  group_by( cof_label ) %>%\n  gt() %>%\n  cols_align(\n    align = \"right\",\n    columns = everything()\n  ) %>%\n  tab_spanner(\n    label = \"90% CI\",\n    columns = c('lower','upper')\n  ) %>%\n  tab_spanner(\n    label = \"Treatment effect adjusted for covariate\",\n    columns = c('Hazard ratio','lower','upper','P(0.95< HR <1.1)')\n  ) %>%\n  fmt_number( \n    columns = 2:4,\n    decimal = 2\n  ) %>%\n  fmt_number( \n    columns = 5,\n    decimal = 4\n  ) %>%\n  sub_missing( missing_text = \" \" )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"hoakrvkton\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#hoakrvkton table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#hoakrvkton thead, #hoakrvkton tbody, #hoakrvkton tfoot, #hoakrvkton tr, #hoakrvkton td, #hoakrvkton th {\n  border-style: none;\n}\n\n#hoakrvkton p {\n  margin: 0;\n  padding: 0;\n}\n\n#hoakrvkton .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#hoakrvkton .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#hoakrvkton .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#hoakrvkton .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#hoakrvkton .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#hoakrvkton .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#hoakrvkton .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#hoakrvkton .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#hoakrvkton .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#hoakrvkton .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#hoakrvkton .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#hoakrvkton .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#hoakrvkton .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#hoakrvkton .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#hoakrvkton .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hoakrvkton .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#hoakrvkton .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#hoakrvkton .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#hoakrvkton .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hoakrvkton .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#hoakrvkton .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hoakrvkton .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#hoakrvkton .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hoakrvkton .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#hoakrvkton .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#hoakrvkton .gt_left {\n  text-align: left;\n}\n\n#hoakrvkton .gt_center {\n  text-align: center;\n}\n\n#hoakrvkton .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#hoakrvkton .gt_font_normal {\n  font-weight: normal;\n}\n\n#hoakrvkton .gt_font_bold {\n  font-weight: bold;\n}\n\n#hoakrvkton .gt_font_italic {\n  font-style: italic;\n}\n\n#hoakrvkton .gt_super {\n  font-size: 65%;\n}\n\n#hoakrvkton .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#hoakrvkton .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#hoakrvkton .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#hoakrvkton .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#hoakrvkton .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#hoakrvkton .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#hoakrvkton .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#hoakrvkton .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#hoakrvkton div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\"></th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Treatment effect adjusted for covariate\">\n        <div class=\"gt_column_spanner\">Treatment effect adjusted for covariate</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Effect/Covariate-Included-in-the-model\">Effect/Covariate Included in the model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Hazard-ratio\">Hazard ratio</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"90% CI\">\n        <div class=\"gt_column_spanner\">90% CI</div>\n      </th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"P(0.95&lt;-HR-&lt;1.1)\">P(0.95&lt; HR &lt;1.1)</th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"lower\">lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"upper\">upper</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"5\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Organ Rejection\">Organ Rejection</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Solution A vs control (Solution B)</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.65</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.29</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.21</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.0605</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Age</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.96</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.93</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">0.99</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.6055</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PBC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.69</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.25</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.38</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.0663</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PSC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">1.17</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.49</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">2.16</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.1340</td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n:::\n\n::: {.notes}\nfrom [TLG Catalog](https://insightsengineering.github.io/tlg-catalog/stable/):\n- Table Efficacy `COXT01` \n:::\n\n---\n\n## 7. Results: Bayesian Jeong-Fine model {style=\"font-size:60%;\"}\n\nAbout the fitting process:\n\n::: incremental\n- It used `Stan` [@Stan_2026a; @Stan_2026b] via the `cmdstanr` package [@Gabry_et_al_2025b].\n- It runs all causes in $930-970$ seconds ($15.5-16.2$ minutes),\n- It produces healthy sampling chains,\n- ... but the order and reference level of some variables can lead to non-finite integrals\n:::\n\n::: {.notes}\nfrom [TLG Catalog](https://insightsengineering.github.io/tlg-catalog/stable/):\n- Table Efficacy `COXT01` \n- Graphs Efficacy `KMG01`\n:::\n\n---\n\n## 7. Results: Bayesian Jeong-Fine model {style=\"font-size:60%;\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Bayesian Jeong-Fine regression (Equivalence: COXT01)\"}\n### Bayesian Jeong-Fine regression ####\n# (Equivalence: COXT01) \n\n# load ADR?\nhr_cof = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_JF.RDS') ) )\n\n\nhr_cof %>%\n  select( \n    'Effect/Covariate Included in the model', \n    'Hazard ratio', \n    lower, \n    upper, \n    'P(0.95< HR <1.1)', \n    cof_label ) %>%\n  filter( cof_label == 'Organ Rejection' ) %>%\n  group_by( cof_label ) %>%\n  gt() %>%\n  cols_align(\n    align = \"right\",\n    columns = everything()\n  ) %>%\n  tab_spanner(\n    label = \"90% CI\",\n    columns = c('lower','upper')\n  ) %>%\n  tab_spanner(\n    label = \"Treatment effect adjusted for covariate\",\n    columns = c('Hazard ratio','lower','upper','P(0.95< HR <1.1)')\n  ) %>%\n  fmt_number( \n    columns = 2:4,\n    decimal = 2\n  ) %>%\n  fmt_number( \n    columns = 5,\n    decimal = 4\n  ) %>%\n  sub_missing( missing_text = \" \" )\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"ixaocoltdm\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#ixaocoltdm table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#ixaocoltdm thead, #ixaocoltdm tbody, #ixaocoltdm tfoot, #ixaocoltdm tr, #ixaocoltdm td, #ixaocoltdm th {\n  border-style: none;\n}\n\n#ixaocoltdm p {\n  margin: 0;\n  padding: 0;\n}\n\n#ixaocoltdm .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#ixaocoltdm .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#ixaocoltdm .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#ixaocoltdm .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#ixaocoltdm .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#ixaocoltdm .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#ixaocoltdm .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#ixaocoltdm .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#ixaocoltdm .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#ixaocoltdm .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#ixaocoltdm .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#ixaocoltdm .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#ixaocoltdm .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#ixaocoltdm .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#ixaocoltdm .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ixaocoltdm .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#ixaocoltdm .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#ixaocoltdm .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#ixaocoltdm .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ixaocoltdm .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#ixaocoltdm .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ixaocoltdm .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#ixaocoltdm .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ixaocoltdm .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#ixaocoltdm .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#ixaocoltdm .gt_left {\n  text-align: left;\n}\n\n#ixaocoltdm .gt_center {\n  text-align: center;\n}\n\n#ixaocoltdm .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#ixaocoltdm .gt_font_normal {\n  font-weight: normal;\n}\n\n#ixaocoltdm .gt_font_bold {\n  font-weight: bold;\n}\n\n#ixaocoltdm .gt_font_italic {\n  font-style: italic;\n}\n\n#ixaocoltdm .gt_super {\n  font-size: 65%;\n}\n\n#ixaocoltdm .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#ixaocoltdm .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#ixaocoltdm .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#ixaocoltdm .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#ixaocoltdm .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#ixaocoltdm .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#ixaocoltdm .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#ixaocoltdm .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#ixaocoltdm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"1\" scope=\"col\"></th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"4\" scope=\"colgroup\" id=\"Treatment effect adjusted for covariate\">\n        <div class=\"gt_column_spanner\">Treatment effect adjusted for covariate</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Effect/Covariate-Included-in-the-model\">Effect/Covariate Included in the model</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Hazard-ratio\">Hazard ratio</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"90% CI\">\n        <div class=\"gt_column_spanner\">90% CI</div>\n      </th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"P(0.95&lt;-HR-&lt;1.1)\">P(0.95&lt; HR &lt;1.1)</th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"lower\">lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"upper\">upper</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"5\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Organ Rejection\">Organ Rejection</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Solution A vs control (Solution B)</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.63</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.30</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.14</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.0530</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Age</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.95</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.92</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">0.98</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.5232</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PBC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.72</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.28</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.43</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.0777</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Disease PSC vs ALD</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">1.02</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.43</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">1.91</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\">0.1247</td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Scale</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.01</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.00</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">0.05</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\"><br /></td></tr>\n    <tr><td headers=\"Organ Rejection  Effect/Covariate Included in the model\" class=\"gt_row gt_right\">Shape</td>\n<td headers=\"Organ Rejection  Hazard ratio\" class=\"gt_row gt_right\">0.50</td>\n<td headers=\"Organ Rejection  lower\" class=\"gt_row gt_right\">0.38</td>\n<td headers=\"Organ Rejection  upper\" class=\"gt_row gt_right\">0.63</td>\n<td headers=\"Organ Rejection  P(0.95< HR <1.1)\" class=\"gt_row gt_right\"><br /></td></tr>\n  </tbody>\n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n---\n\n## 7. Results: Bayesian Jeong-Fine model {style=\"font-size:60%;\"}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Bayesian Jeong-Fine failures plot (Equivalence: KMG01)\"}\n### Jeong-Fine failures plot ####\n# (Equivalence: KMG01)\n\n# load ADR?\nFij_MC = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_JF_cumincMC.RDS' ) ) )\n\nFij_I = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_JF_cumincI.RDS') ) )\n\nt = seq(1, max(ds$time), by=3)\n\nidx = str_detect( Fij_I$variable, '1[:punct:]$' )\nFij_I_mom = Fij_I[idx,]\nplot( t, Fij_I_mom$mean, type='l', lwd=4, lty=1, ylim=c(0,0.07),\n      ylab = \"Cumulative incidence\" ,\n      xlab = \"Time\" )\nfor(i in 1:length(t)){\n  lines( \n    x = rep(t[i],2), \n    y = with(Fij_I_mom[i,], c(q5, q95) ), \n    col=rgb(0,0,0,0.1) )  \n}\nlegend( 'topleft', bty='n', lty=c(1,1,1),  \n        col=c('white','black', rgb(0,0,0,0.3)),\n        legend=c( paste0('P(C=',1,') = ', round( tail(Fij_I$mean[idx], 1), 2) ),\n                  'Mean incidence', \n                  '90% CI') )\n```\n\n::: {.cell-output-display}\n![](Competing-Risks-in-Liver-Transplantation_files/figure-revealjs/unnamed-chunk-9-1.png){width=960}\n:::\n:::\n\n\n::: {.notes}\nAge = 55\nSolutionA = 1\nDiseasePBCvsALD = 0\nDiseasePSCvsALD = 1 \n:::\n\n---\n\n## 7. Results: Bayesian Jeong-Fine model {style=\"font-size:60%;\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"Bayesian Jeong-Fine failures plot (Equivalence: KMG01)\"}\n### Jeong-Fine failures plot ####\n# (Equivalence: KMG01)\n\n# load ADR?\nFij_MC = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_JF_cumincMC.RDS' ) ) )\n\nFij_I = readRDS( \n  file.path( \n    here(),\n    'results',\n    paste0('ARD_B_JF_cumincI.RDS') ) )\n\nt = seq(1, max(ds$time), by=3)\n\npar(mfrow=c(2,2))\nfor( j in 1:4 ){\n  idx = str_detect( Fij_MC$variable, paste0(j,'[:punct:]$') )\n  plot( t, Fij_I$mean[idx], type='l', lwd=4, lty=1, ylim=c(0,0.15),\n        ylab = \"Cumulative incidence\" ,\n        xlab = \"Time\" )\n  lines( t, Fij_MC$mean[idx], col='red', lty=2)\n  legend( 'topleft', bty='n', col=c('white','black','red'), lty=c(1,1,2),\n          legend=c( paste0('P(C=',j,') = ', round( tail(Fij_I$mean[idx], 1), 2) ),\n                    'Double Exponential Quadrature', \n                    'Monte Carlo approx') )\n}\n```\n\n::: {.cell-output-display}\n![](Competing-Risks-in-Liver-Transplantation_files/figure-revealjs/unnamed-chunk-10-1.png){width=960}\n:::\n:::\n\n---\n\n\n## 8. Validation and regulatory aligment {style=\"font-size:60%;\"}\n\nPer the **FDA Draft Guidance on Bayesian Methodology** [@FDA_Bayesian_2026], utilizing the Jeong-Fine model [@Jeong_et_al_2006; @Jeong_et_al_2007] requires the creation of two core documents: \n\n::: incremental\n- A detailed Bayesian analysis plan (BAP)\n- A comprehensive simulation report ([if necessary]{.underline})\n:::\n\n::: {.fragment}\nTogether, they should allow the regulatory authority to assess:\n\n::: incremental\n1. The proposed prior distribution, e.g., \"flavors\" and scenarios\n2. The validity of the likelihood, already required for SAP\n3. The posterior and proposed success criteria, that is, $P(d>a)>c$\n4. The appropriateness of the operating characteristics of the trial, such as FWER, bias, MSE.\n5. Software and reproducibility, ensuring GCP-compliant environments\n:::\n:::\n\n::: {.notes}\n1. [The proposed prior distribution]{.underline}\n\n- Distinguishing between Design and Analysis priors.\n- Categorizing by \"flavor\": Noninformative, Weakly informative, Skeptical, or Informative.\n- Assessing results under various scenarios.\n\n2. [The validity of the likelihood]{.underline}\n\n- Justifying the parametric assumptions for the J&F subdistribution hazard.\n\n3. [The posterior and proposed success criteria]{.underline}\n\n- Its definition, e.g., $P(d>a)>c$ (where $d$ is the treatment effect, $a$ is the clinical relevance threshold, and $c$ is the probability requirement).\n\n4. [The appropriateness of the operating characteristics of the trial]{.underline}\n\n- The justification for sample size and associated power.\n- The FWER (Type I Error) calibration. \n- The assessment of bias, MSE, coverage probability, and width of confidence intervals across a range of scenarios.\n\n5. [Software and Reproducibility]{.underline}\n\n- making sure to use GCP-compliant environments (e.g., `cmdstanr`).\n- Providing code to allow verification of sampling properties and reliability.\n:::\n\n---\n\n## 9. CDISC workflow and traceability {style=\"font-size:60%;\"}\n\nWhile this example utilized pre-processed data, a regulatory-grade workflow requires a rigorous CDISC-compliant pipeline to ensure end-to-end traceability.\n\n::: {.fragment}\nKey \"missing\" steps from this analysis include:\n\n::: incremental\n1. **SDTM Mapping:** Converting raw CRF and EDC data into standardized domains.\n2. **ADaM Derivation:** Building Analysis Data Models (ADSL, ADTTE).\n3. **ARS/ARD Derivation:** Capturing analysis results and metadata in a machine-readable format.\n4. **TLG/TLF Production:** Generating (additional) validated Tables, Listings, and Graphs/Figures from ARD.\n5. and more \n:::\n:::\n\n::: {.notes}\n1. [SDTM Mapping:]{.underline}: Mapping raw data to domains like DM (Demographics), DS (Disposition), and CE (Clinical Events). For modern R-based mapping, the `sdtm.oak` package [@Ganapathy_et_al_2025] provides a framework for modular, reusable mapping scripts.\n\n2. [ADaM Derivation:]{.underline}: Using the `admiral` package [@Straub_et_al_2026] to handle complex censoring logic for competing risks, distinguishing between 'target events', 'competing events', and 'right-censoring'.\n\n3. [ARS/ARD Derivation:]{.underline} **Analysis Results Standard (ARS)** with its **Analysis Results Data (ARD)** is a standardized intermediate layer between ADaM and the final output, facilitating automation, reproducibility, and traceability. \n\n4. [TLG/TLF Production:]{.underline}: Regulatory-grade displays produced using the `NEST` suite (`rtables`, `tern`, `teal`). By consuming standardized ARD, the process becomes \"metadata-driven,\" ensuring the final output is programmatically linked to the underlying ADaM for auditability.\n:::\n\n---\n\n## 10. Business value for Medpace {style=\"font-size:60%;\"}\n\nImplementing advanced Bayesian models differentiates **Medpace** as a high-tier technical partner, ready to propose complex designs under the [FDA Complex Innovative Trial Design (CID) program](https://www.fda.gov/drugs/development-resources/complex-innovative-trial-design-meeting-program)\n\nSpecifically, the Bayesian Jeong-Fine model provides:\n\n::: incremental\n1. Direct interpretability for clinicians and regulatory bodies,\n2. Integrated handling of missing data [@FDA_Bayesian_2026]\n3. Efficiency via information borrowing [@FDA_Bayesian_2026]\n4. Stable extrapolation and prediction capabilities \n5. Robustness in small-sample settings\n:::\n\n::: {.notes}\n\n- [Direct Interpretability for clinicians and regulatory bodies]{.underline}\n  \n    The Bayesian J&F model provides the direct cumulative Incidence. This is far more intuitive for clinicians and regulatory reviewers making risk-benefit assessments.\n\n- [Integrated handling of missing data]{.underline}\n\n    The Bayesian J&F model can treat missing data as part of the parameter estimation process. This could provide a more robust posterior distribution than standard imputation, reducing the risk of biased results in high-attrition trials.\n\n- [Efficiency via information borrowing]{.underline}\n    \n    The Bayesian J&F model has ability to incorporate informative priors (from historical data or RWE) which can potentially reduce the sample size required for current trials\n\n- [Stable extrapolation and prediction capabilities]{.underline}\n    \n    The parametric nature of the Bayesian J&F model allows for stable prediction beyond the last observed event time.\n\n- [Robustness in small-sample settings]{.underline}\n    \n    In scenarios where frequentist asymptotic assumptions fail, e.g., in cases of rare diseases where there is small $N$ or few events, the Bayesian J&F remains valid.\n\n:::\n\n---\n\n## Thank you {.center-xy}\n\n::: {.notes}\nTo conclude I can say that, \n\n1. I can bring my PhD-level Bayesian expertise to the Leuven office.\n2. I have the CDISC knowledge to make these analyses \"submission-ready\" from day one.\n3. I am ready to operationalize these workflows starting from **April**.\n:::\n\n\n---\n\n## Questions? {.center-xy}\n\n---\n\n## References {style=\"font-size:60%;\"}\n\n:::{#refs style=\"font-size:80%;\"}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}